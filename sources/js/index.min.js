/* default.min.js Chen 2015-01-02 */
!function($){
  $(function(){
    //auto match control
    var auto = function(){
      var _m_ = $("#content").css("width");
      var _s_ = $("#sidebar").css("width");
      if ( _m_ == _s_){
        $(".sidebar .panel").toggleClass('panel-success');
        // $(".bs-list .list-group-item").toggleClass("text-center");
        $(".bs-list label").css("margin-bottom",'0px');
        $(".sidebar .panel").css('box-shadow','0px 1px 1px rgba(0, 0, 0, 0.05)');
        $(".sidebar .panel-body").css("padding-top",'15px');
      }else{
        $(".bs-list label").css("margin-bottom",'20px');
        $(".sidebar .panel").css('box-shadow','none');
        $(".sidebar .panel-body").css("padding-top",'0px');

      }
    };

    // setTimeout(function () {
    //       var $sideBar = $('.sidebar')

    //       $sideBar.affix({
    //         offset: {
    //           top: function () {
    //             var offsetTop      = $sideBar.offset().top
    //             var sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10)
    //             var navOuterHeight = $('.docs-nav').height()

    //             return (this.top = offsetTop - navOuterHeight - sideBarMargin)
    //           }
    //         , bottom: function () {
    //             return (this.bottom = $('.footer').outerHeight(true))
    //           }
    //         }
    //       })
    //     }, 100)

        setTimeout(function () {
          $('.bs-top').affix()
        }, 100)



    $.fn.set_modal = function(o){
      var defaults = {width: 0, title: '操作结果', body: '<p class="text-danger">操作失败！</p>', footer: '', center: null, type: 0}
      var o = $.extend(defaults, o);
      var _title = $(this).find(".modal-title p");
      var _modal = $(this).find(".modal-dialog");
      var _body = $(this).find(".modal-body");
      var _footer = $(this).find(".modal-footer");
      var _reset = $(this).find(".modal-footer button[type=reset]");
      if(o.center){ _body.addClass(o.center);}
      if(o.width){ _modal.css('width',o.width+'px');}
      if(o.footer){ _footer.html(o.footer);}
      switch (parseInt(o.type)){
        case 0:
            _footer.hide();
            break;
        case 1:
            _footer.show();
            break;
      }
      _title.html(o.title);
      _body.html(o.body);
    }

    $(".modal").set_modal({title: '用户登录',body: $(".login").html(), footer: $("#other").html(),center: 'text-left',type: 1});
    // $(".modal .modal-title p").html('用户登录');
    // $(".modal .modal-title p").html('用户登录');
    // $(".modal").modal();
    
    var _float_ = new Array('pull-left', 'pull-right');
    var _r_ = get_random(1,1);
    $(".content").toggleClass(_float_[_r_[0]]);
    (jQuery).onload = auto();
    $(window).resize(function(){return auto();});
  });

/*link-control switch*/
// $(".bottom .link-control a").
$(".link-control .btn-more").click(function(){
    var _num = $(".link-control a.hide").length;
    if(_num!=0){
      $(".link-control a.btn-link").removeClass("hide");
      $(".link-control a.btn-link").css("display","inline-block !important");
    }else{
      $(".link-control a.btn-link:gt(16)").addClass("hide");
    }
});

  $(".dropdown-menu li").click(function(){
      var $a = $(this).children("a");
      var i = $(this).index();
      var v = $a.attr("data-toggle");
      var n = $a.html();
      $("#search").val(v+'+'+n+'+'+i);
      var $parent = $(this).parent(".dropdown-menu");
      var $parents = $(this).parents(".input-group-btn");
      $parents.children("button.dropdown-toggle").html(n+'<span class="caret"></span>');
      $parent.children("input:eq(0)").val(v);

  });


  // var _x_ = get_random(4,5);
  $(".bs-list label").set_label_style();
  $(".list-label-item a").each(function(){ $(this).label_style({parents: 'list-label-item'});})
  $(".bs-list").each(function(){
    var _c_ = $(this).children("label").css("background-color");
    $(this).find(".list-group-item").css("border-color",_c_);
  });
 
  
}(jQuery)