/* index.min.js Chen 2015-12-23 */
$(document).ready(function () {
  /* auto set wrapper and sidebar height */
  $("#main").wrapper();
  $(window).resize(function(){
    $("#main").wrapper();
  });

  $('[data-toggle="offcanvas"]').click(function () {
    $('.row-offcanvas').toggleClass('active')
  });

  $(".dropdown-menu li a").click(function(){
    var data = $(this).attr('data');
    var name = $(this).html();
    var $item = $(this).parents('.dropdown').find(".btn-item");
    var $data = $(this).parents('.dropdown').children("input[type='hidden']");
    $item.html(name);
    $data.val(data);
  });

  // $("button[data-toggle=popover], input[data-toggle=popover], a[data-toggle=popover]").popover();
  $("input[data-toggle=tips]").popover_tips({stopPropagation: true});
  $("button[data-toggle=detail]").click(function(event){
    var $this = $(this);
    $("button[data-toggle=detail]").popover('hide');
    $this.popover('show');
    $(document).click(function(event){
      $this.popover('hide');
    });
    event.stopPropagation();
  });
  

  $('.content-list .panel .panel-heading label a').click(function(){
    var _url = $(this).href;
    $.ajax({
        url: _url,
    });
  });

  $(function(){
      /* auto set sidebar navgation selected */
      $(".sidebar-left .list-group-item").each(function(){
        var toggle = $(this).attr('data-toggle');
        var cur = typeof(toggle) != 'undefined' && toggle != 'index'? toggle : null;
        if (cur != null){
            var patt = "/"+cur+"/";
            if (window.location.href.match(patt)){
                $(".sidebar-left .list-group-item").removeClass("active");
                $(this).addClass("active");
                return false;
            }else{
                $(".sidebar-left .list-group-item:first-child").addClass("active");
            }
        }
      });

  });


  /*label-control*/
  $(".label-text").val();
  $(".label-del").del_label();
  $('.label-control .label-list').each(function(){ 
    $(this).check_label();
    $(this).find('.label').each(function(){ $(this).label_style(); });
  });
  $(".label-text").input_label();
  /*keydown(function(event){
    if (event.keyCode == 32){ //if is space key auto create
      var i = $(this).index('.label-control .label-text');
      alert(i);
      var $parent = $(".label-control:eq("+i+")");
      var x = $parent.find(".label-list").check_label();
      if (x != 5){
        var $this = $(this);
        var v = $.trim($(this).val());
        var p = /^[\u4e00-\ufa95A-Za-z]{2,6}$/;
        var dc = $this.attr('data-content');
        if (v==''){
          $this.val("");
          // $this.attr('placeholder','请输入标签');
        } else if (p.test(v)){
          var labs = $(this).parents('.label-list').find(".label").set_labels().split(',');
          var len = labs.length;
          $parent.find("h4").create_label({content: v});
          $parent.find(".label-list").check_label();
          $this.val("");
          // $this.attr('placeholder','请输入标签');
        } else {
          $this.val("");
          $(this).popover_warning({msg: '格式不正确！'});
          // $this.attr('placeholder','请输入标签');
        }
      }
    }
  });*/




 
});

